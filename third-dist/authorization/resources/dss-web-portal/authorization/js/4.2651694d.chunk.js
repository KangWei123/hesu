(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{22:function(t,e,i){"use strict";var a=i(16),r=i(2),n=a.utils.services,o=r.a.WpSchema;e.a={getWorkWechatAuthInfo:function(t){return n.get(o+"/wxwork/auth/get_auth_info",{action:"获取企业微信授权信息",params:t})},confirmWorkWechatAuthCode:function(t){return n.post(o+"/wxwork/auth/confirm",t,{action:"确认企业微信授权临时码"})}}},74:function(t,e,i){},75:function(t,e,i){},81:function(t,e,i){"use strict";var a=i(74);i.n(a).a},82:function(t,e,i){"use strict";var a=i(75);i.n(a).a},84:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"auth-guide-wrapper"},[i("PageHeader",[t._v("企业微信授权")]),t._v(" "),t.ifBound?t._e():i("div",{staticClass:"guide-title"},[i("p",[t._v("欢迎使用惟客大数据经营平台")]),t._v(" "),i("p",[t._v("请按照相关引导完成企业微信授权")])]),t._v(" "),t.ifBound?i("div",{staticClass:"guide-card-wrapper bind-success"},[i("div",{staticClass:"guide-card-item"},[i("div",{staticClass:"card-item-corp-name"},[t._v(t._s(t.authInfo.workWechat.corpInfo.corpName))]),t._v(" "),i("div",{staticClass:"card-item-title"},[t._v("授权应用权限")]),t._v(" "),t._m(0)])]):i("div",{staticClass:"guide-card-wrapper"},[i("div",{staticClass:"guide-card-item"},[i("div",{staticClass:"card-item-logo"}),t._v(" "),i("div",{staticClass:"card-item-title"},[t._v("绑定企业微信")]),t._v(" "),i("div",{staticClass:"card-item-desc"},[t._v("链接员工与客户微信")]),t._v(" "),i("div",[i("el-button",{staticClass:"card-item-btn",attrs:{loading:t.loading,round:"",type:"primary"},on:{click:function(e){return t.onClickBind("workWechat")}}},[t._v("已开通去绑定")])],1),t._v(" "),i("div",[i("el-button",{staticClass:"card-item-btn",attrs:{type:"text"},on:{click:function(e){return t.toRegister("workWechat")}}},[t._v("未开通去申请开通")])],1)])]),t._v(" "),t.ifBound?t._e():i("div",{staticClass:"guide-info-wrapper"},[t._v("\n    备注说明：\n    "),i("p",[t._v("（1）如部分账号未申请，需先提交申请，各类型账号微信审核时间可能会有差异。审核通过后再绑定相关账号，如有问题请联系惟客客服人员协助；")]),t._v(" "),i("p",[t._v("（2）如响应授权未完成，则会影响相关业务功能管理；")])])],1)};a._withStripped=!0;var r=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"page-header"},[this._t("default")],2)};r._withStripped=!0;var n={name:"PageHeader"},o=(i(81),i(4)),c=Object(o.a)(n,r,[],!1,null,"083a69b6",null);c.options.__file="src/view/components/page-header/index.vue";var s=c.exports,u=i(22),d={name:"AuthGuide",components:{PageHeader:s},data:function(){return{ifBound:0,loading:!1,authInfo:{workWechat:{suite_id:"wwc2940513e67953b0",pre_auth_code:"",redirect_uri:"https://www.wakedata.com/work-wechat-authorization-success.html",corpInfo:{corpId:"",corpName:"",corpLogoUrl:""}}},authTypeMap:{workWechat:function(t){return u.a.getWorkWechatAuthInfo(t)}},registerLinkMap:{workWechat:function(){return"https://work.weixin.qq.com/wework_admin/register_wx?from=sem_baidu&keyword=brand&derivative=0010505600"}}}},methods:{getAuthInfo:function(t){return this.authTypeMap[t]},getRegisterUrl:function(t){return this.registerLinkMap[t]},onClickBind:function(t){var e=this;this.loading=!0,this.getAuthInfo(t)({suiteId:this.authInfo.workWechat.suite_id}).then((function(t){if(t.data){console.log(t.data);var i=t.data,a=i.preAuthCode;i.corpId,i.corpName,i.corpLogoUrl,i.createTime;e.authInfo.workWechat.pre_auth_code=a;var r=e.authInfo.workWechat;window.open("https://open.work.weixin.qq.com/3rdapp/install?suite_id="+r.suite_id+"&pre_auth_code="+r.pre_auth_code+"&redirect_uri="+r.redirect_uri)}})).finally((function(){e.loading=!1}))},toRegister:function(t){var e=this.getRegisterUrl(t)();window.open(e)}},mounted:function(){var t=this;this.loading=!0,this.getAuthInfo("workWechat")({suiteId:this.authInfo.workWechat.suite_id}).then((function(e){if(e.data){var i=e.data,a=i.corpId,r=i.corpName,n=i.corpLogoUrl,o=t.authInfo.workWechat.corpInfo;a&&(o.corpId=a,o.corpName=r,o.corpLogoUrl=n,t.ifBound=1)}})).finally((function(){return t.loading=!1}))}},h=(i(82),Object(o.a)(d,a,[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"card-item-auth-list"},[e("li",[this._v("发信息权限")]),this._v(" "),e("li",[this._v("应用设置权限")]),this._v(" "),e("li",[this._v("通讯录管理权限")]),this._v(" "),e("li",[this._v("设置自定义菜单权限")])])}],!1,null,"04233926",null));h.options.__file="src/view/auth-setting/auth-guide/index.vue";e.default=h.exports}}]);
//# sourceMappingURL=4.2651694d.chunk.js.map