/*!
 * wkapi.js 0.1.4
 * (c) 2018-2019 wakedata
 * Released under the MIT License.
 */
!function () { "use strict"; var e = window, n = { HASH: "hash", HISTORY: "history", NONE: "none" }, t = { debug: !0, spa: "none", session_timeout: 18e5, appId: "", appKey: "", beat_time: 6e3, uuid: "", opid: "", ru: "", last: "" }, o = "https:" === document.location.protocol.toLowerCase() ? "https:" : "http:", r = { URL_UUID: o + "//stream.wakedata.com/gather/h5report/uuid", URL_REPORT_REAL_TIME: o + "//stream.wakedata.com/gather/h5report/report" }, i = { type: { PAGE: "page", EVENT: "event", HEAT_BEAT: "heatbeat", BOOT: "boot", ERROR: "error" }, value: { HEAT_BEAT: "heatbeat", SHOW: "onshow", CLICK: "click", BOOT: "boot", USER: "user", ERROR: "error", EXPOSURE_ITEM: "exposure_item" } }, a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, u = {}; window.device = u; var s = window.navigator.userAgent.toLowerCase(), c = ["googletv", "viera", "smarttv", "internet.tv", "netcast", "nettv", "appletv", "boxee", "kylo", "roku", "dlnadoc", "roku", "pov_tv", "hbbtv", "ce-html"]; function d(e) { return -1 !== s.indexOf(e) } function l(e) { for (var n = 0; n < e.length; n++)if (u[e[n]]()) return e[n]; return "unknown" } function b(e) { return Object.prototype.toString.call(e) } u.macos = function () { return d("mac") }, u.ios = function () { return u.iphone() || u.ipod() || u.ipad() }, u.iphone = function () { return !u.windows() && d("iphone") }, u.ipod = function () { return d("ipod") }, u.ipad = function () { return d("ipad") }, u.android = function () { return !u.windows() && d("android") }, u.androidPhone = function () { return u.android() && d("mobile") }, u.androidTablet = function () { return u.android() && !d("mobile") }, u.blackberry = function () { return d("blackberry") || d("bb10") || d("rim") }, u.blackberryPhone = function () { return u.blackberry() && !d("tablet") }, u.blackberryTablet = function () { return u.blackberry() && d("tablet") }, u.windows = function () { return d("windows") }, u.windowsPhone = function () { return u.windows() && d("phone") }, u.windowsTablet = function () { return u.windows() && d("touch") && !u.windowsPhone() }, u.fxos = function () { return (d("(mobile") || d("(tablet")) && d(" rv:") }, u.fxosPhone = function () { return u.fxos() && d("mobile") }, u.fxosTablet = function () { return u.fxos() && d("tablet") }, u.meego = function () { return d("meego") }, u.cordova = function () { return window.cordova && "file:" === location.protocol }, u.nodeWebkit = function () { return "object" === a(window.process) }, u.mobile = function () { return u.androidPhone() || u.iphone() || u.ipod() || u.windowsPhone() || u.blackberryPhone() || u.fxosPhone() || u.meego() }, u.tablet = function () { return u.ipad() || u.androidTablet() || u.blackberryTablet() || u.windowsTablet() || u.fxosTablet() }, u.desktop = function () { return !u.tablet() && !u.mobile() }, u.television = function () { for (var e = 0; e < c.length;) { if (d(c[e])) return !0; e++ } return !1 }, u.portrait = function () { return screen.orientation && Object.prototype.hasOwnProperty.call(window, "onorientationchange") ? screen.orientation.type.includes("portrait") : window.innerHeight / window.innerWidth > 1 }, u.landscape = function () { return screen.orientation && Object.prototype.hasOwnProperty.call(window, "onorientationchange") ? screen.orientation.type.includes("landscape") : window.innerHeight / window.innerWidth < 1 }, u.type = l(["mobile", "tablet", "desktop"]), u.os = l(["ios", "iphone", "ipad", "ipod", "android", "blackberry", "windows", "fxos", "meego", "television"]); var f = "-1", p = e.external, w = e.navigator.userAgent || "", v = e.navigator.appVersion || "", h = e.navigator.vendor || "", m = /\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/, g = /\bbb10\b.+?\bversion\/([\d.]+)/, y = /\bblackberry\b.+\bversion\/([\d.]+)/, _ = /\bblackberry\d+\/([\d.]+)/, O = [["nokia", function (e) { return -1 !== e.indexOf("nokia ") ? /\bnokia ([0-9]+)?/ : /\bnokia([a-z0-9]+)?/ }], ["samsung", function (e) { return -1 !== e.indexOf("samsung") ? /\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/ : /\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/ }], ["wp", function (e) { return -1 !== e.indexOf("windows phone ") || -1 !== e.indexOf("xblwp") || -1 !== e.indexOf("zunewp") || -1 !== e.indexOf("windows ce") }], ["pc", "windows"], ["ipad", "ipad"], ["ipod", "ipod"], ["iphone", /\biphone\b|\biph(\d)/], ["mac", "macintosh"], ["mi", /\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/], ["hongmi", /\bhm\b|redmi[ \-]?([a-z0-9]+)/], ["aliyun", /\baliyunos\b(?:[\-](\d+))?/], ["meizu", function (e) { return e.indexOf("meizu") >= 0 ? /\bmeizu[\/ ]([a-z0-9]+)\b/ : /\bm([0-9cx]{1,4})\b/ }], ["nexus", /\bnexus ([0-9s.]+)/], ["huawei", function (e) { var n = /\bmediapad (.+?)(?= build\/huaweimediapad\b)/; return -1 !== e.indexOf("huawei-huawei") ? /\bhuawei\-huawei\-([a-z0-9\-]+)/ : n.test(e) ? n : /\bhuawei[ _\-]?([a-z0-9]+)/ }], ["lenovo", function (e) { return -1 !== e.indexOf("lenovo-lenovo") ? /\blenovo\-lenovo[ \-]([a-z0-9]+)/ : /\blenovo[ \-]?([a-z0-9]+)/ }], ["zte", function (e) { return /\bzte\-[tu]/.test(e) ? /\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/ : /\bzte[ _\-]?([a-su-z0-9\+]+)/ }], ["vivo", /\bvivo(?: ([a-z0-9]+))?/], ["htc", function (e) { return /\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e) ? /\bhtc[ _\-]?([a-z0-9 ]+(?= build))/ : /\bhtc[ _\-]?([a-z0-9 ]+)/ }], ["oppo", /\boppo[_]([a-z0-9]+)/], ["konka", /\bkonka[_\-]([a-z0-9]+)/], ["sonyericsson", /\bmt([a-z0-9]+)/], ["coolpad", /\bcoolpad[_ ]?([a-z0-9]+)/], ["lg", /\blg[\-]([a-z0-9]+)/], ["android", /\bandroid\b|\badr\b/], ["blackberry", function (e) { return e.indexOf("blackberry") >= 0 ? /\bblackberry\s?(\d+)/ : "bb10" }]], x = [["wp", function (e) { return -1 !== e.indexOf("windows phone ") ? /\bwindows phone (?:os )?([0-9.]+)/ : -1 !== e.indexOf("xblwp") ? /\bxblwp([0-9.]+)/ : -1 !== e.indexOf("zunewp") ? /\bzunewp([0-9.]+)/ : "windows phone" }], ["windows", /\bwindows nt ([0-9.]+)/], ["macosx", /\bmac os x ([0-9._]+)/], ["iOS", function (e) { return /\bcpu(?: iphone)? os /.test(e) ? /\bcpu(?: iphone)? os ([0-9._]+)/ : -1 !== e.indexOf("iph os ") ? /\biph os ([0-9_]+)/ : /\bios\b/ }], ["yunos", /\baliyunos ([0-9.]+)/], ["Android", function (e) { return e.indexOf("android") >= 0 ? /\bandroid[ \/-]?([0-9.x]+)?/ : e.indexOf("adr") >= 0 ? e.indexOf("mqqbrowser") >= 0 ? /\badr[ ]\(linux; u; ([0-9.]+)?/ : /\badr(?:[ ]([0-9.]+))?/ : "android" }], ["chromeos", /\bcros i686 ([0-9.]+)/], ["linux", "linux"], ["windowsce", /\bwindows ce(?: ([0-9.]+))?/], ["symbian", /\bsymbian(?:os)?\/([0-9.]+)/], ["blackberry", function (e) { var n = e.match(g) || e.match(y) || e.match(_); return n ? { version: n[1] } : "blackberry" }]], k = [["edgehtml", /edge\/([0-9.]+)/], ["trident", m], ["blink", function () { return "chrome" in e && "CSS" in e && /\bapplewebkit[\/]?([0-9.+]+)/ }], ["webkit", /\bapplewebkit[\/]?([0-9.+]+)/], ["gecko", function (e) { var n; if (n = e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/)) return { version: n[1] + "." + n[2] } }], ["presto", /\bpresto\/([0-9.]+)/], ["androidwebkit", /\bandroidwebkit\/([0-9.]+)/], ["coolpadwebkit", /\bcoolpadwebkit\/([0-9.]+)/], ["u2", /\bu2\/([0-9.]+)/], ["u3", /\bu3\/([0-9.]+)/]], S = [["edge", /edge\/([0-9.]+)/], ["sogou", function (e) { return e.indexOf("sogoumobilebrowser") >= 0 ? /sogoumobilebrowser\/([0-9.]+)/ : e.indexOf("sogoumse") >= 0 || / se ([0-9.x]+)/ }], ["theworld", function () { var e = R("theworld"); return void 0 !== e ? e : "theworld" }], ["360", function (e) { var n = R("360se"); return void 0 !== n ? n : -1 !== e.indexOf("360 aphone browser") ? /\b360 aphone browser \(([^\)]+)\)/ : /\b360(?:se|ee|chrome|browser)\b/ }], ["maxthon", function () { try { if (p && (p.mxVersion || p.max_version)) return { version: p.mxVersion || p.max_version } } catch (e) { } return /\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/ }], ["micromessenger", /\bmicromessenger\/([\d.]+)/], ["qq", /\bm?qqbrowser\/([0-9.]+)/], ["green", "greenbrowser"], ["tt", /\btencenttraveler ([0-9.]+)/], ["liebao", function (e) { if (e.indexOf("liebaofast") >= 0) return /\bliebaofast\/([0-9.]+)/; if (-1 === e.indexOf("lbbrowser")) return !1; var n; try { p && p.LiebaoGetVersion && (n = p.LiebaoGetVersion()) } catch (e) { } return { version: n || f } }], ["tao", /\btaobrowser\/([0-9.]+)/], ["coolnovo", /\bcoolnovo\/([0-9.]+)/], ["saayaa", "saayaa"], ["baidu", /\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/], ["ie", m], ["mi", /\bmiuibrowser\/([0-9.]+)/], ["opera", function (e) { var n = /\bopera.+version\/([0-9.ab]+)/; return n.test(e) ? n : /\bopr\/([0-9.]+)/ }], ["oupeng", /\boupeng\/([0-9.]+)/], ["yandex", /yabrowser\/([0-9.]+)/], ["ali-ap", function (e) { return e.indexOf("aliapp") > 0 ? /\baliapp\(ap\/([0-9.]+)\)/ : /\balipayclient\/([0-9.]+)\b/ }], ["ali-ap-pd", /\baliapp\(ap-pd\/([0-9.]+)\)/], ["ali-am", /\baliapp\(am\/([0-9.]+)\)/], ["ali-tb", /\baliapp\(tb\/([0-9.]+)\)/], ["ali-tb-pd", /\baliapp\(tb-pd\/([0-9.]+)\)/], ["ali-tm", /\baliapp\(tm\/([0-9.]+)\)/], ["ali-tm-pd", /\baliapp\(tm-pd\/([0-9.]+)\)/], ["uc", function (e) { return e.indexOf("ucbrowser/") >= 0 ? /\bucbrowser\/([0-9.]+)/ : e.indexOf("ubrowser/") >= 0 ? /\bubrowser\/([0-9.]+)/ : /\buc\/[0-9]/.test(e) ? /\buc\/([0-9.]+)/ : e.indexOf("ucweb") >= 0 ? /\bucweb([0-9.]+)?/ : /\b(?:ucbrowser|uc)\b/ }], ["chrome", / (?:chrome|crios|crmo)\/([0-9.]+)/], ["android", function (e) { if (-1 !== e.indexOf("android")) return /\bversion\/([0-9.]+(?: beta)?)/ }], ["blackberry", function (e) { var n = e.match(g) || e.match(y) || e.match(_); return n ? { version: n[1] } : "blackberry" }], ["safari", /\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//], ["webview", /\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/], ["firefox", /\bfirefox\/([0-9.ab]+)/], ["nokia", /\bnokiabrowser\/([0-9.]+)/]]; function R(n) { if (p) try { var t = p.twGetRunPath.toLowerCase(), o = p.twGetSecurityID(e), r = p.twGetVersion(o); if (t && -1 === t.indexOf(n)) return !1; if (r) return { version: r } } catch (e) { } } function E(e, n, t) { var o = "[object Function]" === b(n) ? n.call(null, t) : n; if (!o) return null; var r = { name: e, version: f, codename: "" }, i = b(o); if (!0 === o) return r; if ("[object String]" === i) { if (-1 !== t.indexOf(o)) return r } else { if (function (e) { return "[object Object]" === b(e) }(o)) return o.hasOwnProperty("version") && (r.version = o.version), r; if (o.exec) { var a = o.exec(t); if (a) return a.length >= 2 && a[1] ? r.version = a[1].replace(/_/g, ".") : r.version = f, r } } } var T = { name: "", version: "" }; function P(e, n, t, o) { var r = T; !function (e, n) { for (var t = 0, o = e.length; t < o && !1 !== n.call(e, e[t], t); t++); }(n, function (n) { var t = E(n[0], n[1], e); if (t) return r = t, !1 }), t.call(o, r.name, r.version) } var z = function (e) { e = (e || "").toLowerCase(); var n = {}; P(e, O, function (e, t) { var o = parseFloat(t); n.device = { name: e, version: o, fullVersion: t }, n.device[e] = o }, n), P(e, x, function (e, t) { var o = parseFloat(t); n.os = { name: e, version: o, fullVersion: t }, n.os[e] = o }, n); var t = function (e) { if (!m.test(e)) return null; var n, t, o, r, i; if (-1 !== e.indexOf("trident/") && (n = /\btrident\/([0-9.]+)/.exec(e)) && n.length >= 2) { o = n[1]; var a = n[1].split("."); a[0] = parseInt(a[0], 10) + 4, i = a.join(".") } r = (n = m.exec(e))[1]; var u = n[1].split("."); return void 0 === i && (i = r), u[0] = parseInt(u[0], 10) - 4, t = u.join("."), void 0 === o && (o = t), { browserVersion: i, browserMode: r, engineVersion: o, engineMode: t, compatible: o !== t } }(e); return P(e, k, function (e, o) { var r = o; t && (o = t.engineVersion || t.engineMode, r = t.engineMode); var i = parseFloat(o); n.engine = { name: e, version: i, fullVersion: o, mode: parseFloat(r), fullMode: r, compatible: !!t && t.compatible }, n.engine[e] = i }, n), P(e, S, function (e, o) { var r = o; t && ("ie" === e && (o = t.browserVersion), r = t.browserMode); var i = parseFloat(o); n.browser = { name: e, version: i, fullVersion: o, mode: parseFloat(r), fullMode: r, compatible: !!t && t.compatible }, n.browser[e] = i }, n), n }(w + " " + v + " " + h), A = { each: function (e, n, t) { if (null != e) if (Array.prototype.forEach && e.forEach === Array.prototype.forEach) e.forEach(n, t); else if (e.length === +e.length) for (var o = 0, r = e.length; o < r; o++)o in e && n.call(t, e[o], o, e); else for (var i in e) e.hasOwnProperty.call(e, i) && n.call(t, e[i], i, e) }, extend: function (e) { return A.each(Array.prototype.slice.call(arguments, 1), function (n) { for (var t in n) void 0 !== n[t] && (e[t] = n[t]) }), e }, isObject: function (e) { return e === Object(e) && !A.isArray(e) }, isUndefined: function (e) { return void 0 === e }, isArguments: function (e) { return !(!e || !hasOwnProperty.call(e, "callee")) }, JSONDecode: function (e) { try { return JSON.parse(e) } catch (e) { return {} } }, JSONEncode: function (e) { try { return JSON.stringify(e) } catch (e) { return "" } }, isFunction: function (e) { var n = !1; return "function" == typeof e && (n = !0), n }, isNumber: function (e) { return "[object Number]" == Object.prototype.toString.call(e) }, isString: function (e) { return "[object String]" == Object.prototype.toString.call(e) }, HTTPBuildQuery: function (e, n) { var t = void 0, o = void 0, r = []; return A.isUndefined(n) && (n = "&"), A.each(e, function (e, n) { t = encodeURIComponent(e.toString()), o = encodeURIComponent(n), r[r.length] = o + "=" + t }), r.join(n) }, trim: function (e) { if (e) return e.replace(/(^\s*)|(\s*$)/g, "") } }; A.isArray = Array.isArray || function (e) { return "[object Array]" === Object.prototype.toString.apply(e) }, A.jsonP = function (n, t) { var o = "wk_api_cb_" + +new Date, r = null; (r = document.createElement("script")).async = "async", r.setAttribute("charset", "UTF-8"), r.src = n + "?callback=" + o, r.type = "text/javascript", document.getElementsByTagName("head")[0].appendChild(r), e[o] = function (n) { delete e[o], t(n) } }, A.register_event = function () { function e(n) { return n && (n.preventDefault = e.preventDefault, n.stopPropagation = e.stopPropagation), n } return e.preventDefault = function () { this.returnValue = !1 }, e.stopPropagation = function () { this.cancelBubble = !0 }, function (n, t, o, r, i) { if (n) if (n.addEventListener && !r) n.addEventListener(t, o, !!i); else { var a = "on" + t, u = n[a]; n[a] = function (n, t, o) { return function (r) { if (r = r || e(window.event)) { var i, a, u = !0; return A.isFunction(o) && (i = o(r)), a = t.call(n, r), !1 !== i && !1 !== a || (u = !1), u } } }(n, o, u) } else console.error("No valid element provided to register_event") } }(), A.info = { deviceModel: function () { var n = ""; if (u.android()) { var t = e.navigator.userAgent.split(";"), o = t.indexOf("Build/"); o > -1 && (n = t[o].substring(0, t[o].indexOf("Build/"))) } else u.ios() && u.iphone() && (n = "iPhone"); return n }, properties: function () { var n = { "5.0": "Win2000", 5.1: "WinXP", 5.2: "Win2003", "6.0": "WindowsVista", 6.1: "Win7", 6.2: "Win8", 6.3: "Win8.1", "10.0": "Win10" }, t = u.type, o = A.trim(this.deviceModel()), r = u.windows(), i = z.os.name + " " + z.os.fullVersion; return r && n[z.os.fullVersion] && (i = n[z.os.fullVersion]), { deviceModel: o, deviceOs: z.os.name, deviceOsVersion: i, devicePlatform: t, browser: z.browser.name, browserVersion: z.browser.fullVersion, currentUrl: document.URL, referrer: e.document.referrer, screenWidth: e.screen.width, screenHeight: e.screen.height } } }, A.localStorage = { error: function (e) { A.console.error("localStorage error: " + e) }, get: function (e) { try { return window.localStorage.getItem(e) } catch (e) { A.localStorage.error(e) } return null }, set: function (e, n) { try { window.localStorage.setItem(e, n) } catch (e) { A.localStorage.error(e) } } }, A.cookie = { get: function (e) { for (var n = e + "=", t = document.cookie.split(";"), o = 0; o < t.length; o++) { for (var r = t[o]; " " === r.charAt(0);)r = r.substring(1, r.length); if (0 === r.indexOf(n)) return decodeURIComponent(r.substring(n.length, r.length)) } return null }, set: function (e, n, t, o, r) { var i = "", a = "", u = ""; if (o) { var s = document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i), c = s ? s[0] : ""; i = c ? "; domain=." + c : "" } if (t) { var d = new Date; d.setTime(d.getTime() + 24 * t * 60 * 60 * 1e3), a = "; expires=" + d.toGMTString() } r && (u = "; secure"); var l = e + "=" + encodeURIComponent(n) + a + "; path=/" + i + u; return document.cookie = l, l } }, A.console = { log: function () { if (!A.isUndefined(window.console)) try { window.console.log(arguments) } catch (e) { } }, error: function () { if (!A.isUndefined(window.console)) try { window.console.error(arguments) } catch (e) { } } }; var I = { onPageShow: "" }; function V() { var e = "", n = function () { I.onPageShow && I.onPageShow() }; !function t() { setTimeout(function () { location.href !== e && (e = location.href, n()), t() }, 100) }() } var U = { wait: null }, H = "wk_user_time_20190417", j = !!e.localStorage && !!e.localStorage.setItem, L = function (e) { return j ? A.localStorage.get(e) : A.cookie.get(e) }, C = function (e, n) { return j ? A.localStorage.set(e, n) : A.cookie.set(e, n, 1024) }, W = { getOpId: function (e) { var n = !1, o = 0; n = !e || !((o = +new Date - e) < t.session_timeout); var r = (L("wk_user_op_20190417") || 1e3) - 0; return n && (r += 1), A.console.log("session is new? ", n, o, r), C("wk_user_op_20190417", r), r }, uuid: function (e) { return t.uuid ? e(t.uuid) : L("wk_user_uuid_20190417") ? e(t.uuid = L("wk_user_uuid_20190417")) : (U.wait = e, void A.jsonP(r.URL_UUID, function (e) { C("wk_user_uuid_20190417", t.uuid = e.data), U.wait(t.uuid), U.wait = null })) }, getRTime: function () { return L(H) ? L(H) - 0 : null }, setRTime: function () { var e = +new Date; C(H, e + "") } }, D = A.info.properties(), B = Object.prototype.hasOwnProperty.call(window, "onorientationchange") ? "orientationchange" : "resize"; function M() { D.screenWidth = e.screen.width, D.screenHeight = e.screen.height } e.addEventListener ? e.addEventListener(B, M, !1) : e.attachEvent ? e.attachEvent(B, M) : e[B] = M; var N = { list: [], _appReady: !1, _userReady: !1, fireApp: function () { this._appReady = !0, this.check() }, fireUser: function () { this._userReady = !0, this.check() }, check: function () { if (this._appReady && this._userReady) { for (var e = 0, n = this.list.length; e < n; e++)this.run(this.list[e]); this.list.length = 0 } }, send: function (e) { var n, o; W.setRTime(), e.optime = +new Date, e.ru = t.ru, e.scene = (n = e.last = t.last, o = document.domain.toLowerCase(), n ? (n = n.toLowerCase()).split("://")[1].split("/")[0] === o ? 3 : 1 : 2), e.device = { dp: { sw: D.screenWidth, sh: D.screenHeight }, model: D.deviceModel, os: D.deviceOs, os_ver: D.deviceOsVersion, platform: D.devicePlatform }, e.browser = { browser: D.browser, browser_ver: D.browserVersion }, this.list.push(e), this.check() }, run: function (e) { var n = new Image; e.global = { opid: t.opid, user_id: t.uuid, appkey: t.appKey }, e.browser.model = t.spa, n.src = r.URL_REPORT_REAL_TIME + "?ts=" + +new Date + "&appId=" + t.appId + "&content=" + encodeURIComponent(JSON.stringify(e)) } }, F = { start: !1, last: 0 }; function G() { return location.href } var q = { getScreen: function () { return { sw: D.screenWidth, sh: D.screenHeight } }, userReady: function () { N.fireUser() }, appReady: function (e, n) { t.appId = e, t.appKey = n, N.fireApp() }, initPage: function () { t.ru = G(), t.last = e.document.referrer }, boot: function () { N.send({ event_type: i.type.BOOT, event: i.value.BOOT }) }, page: function () { t.ru && G() !== t.ru && (t.last = t.ru, t.ru = G()), N.send({ event_type: i.type.PAGE, event: i.value.SHOW }) }, startHeartBeat: function () { F.start || (F.start = !0, function e() { F.last = +new Date, setTimeout(function () { N.send({ event_type: i.type.HEAT_BEAT, event: i.value.HEAT_BEAT, parm: { page: "", dur: +new Date - F.last } }), e() }, t.beat_time) }()) }, click: function (e, n) { N.send({ event_type: i.type.EVENT, event: i.value.CLICK, parm: { top: e, left: n } }) }, user: function (e) { N.send({ event_type: i.type.EVENT, event: i.value.USER, parm: e }) }, event: function (e, n) { N.send({ event_type: i.type.EVENT, event: e, parm: n }) }, error: function (e) { N.send({ event_type: i.type.ERROR, event: i.value.ERROR, parm: { msg: e } }) } }; !function () { if (!e.___wkonload) { e.___wkonload = !0, q.initPage(); var n = W.getRTime(); (!n || +new Date - n > t.beat_time) && q.boot(), W.uuid(function (e) { t.opid = W.getOpId(n), t.uuid = e, A.console.log("user.uuid-------", e, t.opid), q.userReady() }), A.register_event(document.body, "click", function (e) { if (e = e || window.event || {}) { var n = e.clientX, t = e.clientY, o = q.getScreen(); q.click(n / o.sw, t / o.sh) } }), q.startHeartBeat() } }(), e.wkApi = { init: function (o) { if (!e.___wkinit) { e.___wkinit = !0; var r, i = o || {}, a = i.model, u = i.appId, s = i.appKey; !a || a !== n.HASH && a !== n.HISTORY || (t.spa = a), r = function () { q.page() }, I.onPageShow = r, t.spa === n.HASH ? V() : t.spa === n.HISTORY && V(), q.appReady(u, s) } }, report: function (e, n) { q.event(e, n) }, user: function (e) { q.user(e) }, error: function (e) { q.error(e) } } }();
